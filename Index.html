<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dots & Boxes</title>

<style>
:root {
  --bg:#0f172a;
  --board:#020617;
  --dot:#fff;
  --line:#38bdf8;
  --p1:#22c55e;
  --p2:#ef4444;
}

body{
  margin:0;
  font-family:Arial, sans-serif;
  background:var(--bg);
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}

.screen{
  width:100%;
  max-width:420px;
  padding:20px;
  background:var(--board);
  border-radius:12px;
  text-align:center;
}

.hidden{display:none;}

button,select,input{
  width:100%;
  padding:12px;
  margin-top:10px;
  border:none;
  border-radius:8px;
  font-size:1rem;
}

button{
  background:#2563eb;
  color:#fff;
}
button:hover{background:#1d4ed8;}

.board{
  position:relative;
  margin:20px auto;
}

.dot{
  width:10px;
  height:10px;
  background:var(--dot);
  border-radius:50%;
  position:absolute;
  transform:translate(-50%,-50%);
}

.h-line,.v-line{
  position:absolute;
  background:#334155;
}
.h-line{height:6px;}
.v-line{width:6px;}

.h-line.active,.v-line.active{
  background:var(--line);
}

.box{
  position:absolute;
  font-size:12px;
  font-weight:bold;
  display:flex;
  align-items:center;
  justify-content:center;
}

.score{
  display:flex;
  justify-content:space-between;
}
</style>
</head>

<body>

<!-- MENU -->
<div class="screen" id="menu">
  <h1>Dots & Boxes</h1>
  <button onclick="goMode()">Start</button>
</div>

<!-- MODE -->
<div class="screen hidden" id="mode">
  <h2>Game Mode</h2>
  <button onclick="twoPlayerDots()">Two Player</button>
</div>

<!-- DOT SETUP -->
<div class="screen hidden" id="dotSetup">
  <h2>Select Grid Size</h2>
  <select id="gridSize">
    <option value="3">3 × 3</option>
    <option value="4" selected>4 × 4</option>
    <option value="5">5 × 5</option>
  </select>
  <button onclick="nameSetup()">Next</button>
</div>

<!-- NAME SETUP -->
<div class="screen hidden" id="nameSetup">
  <h2>Player Names</h2>
  <input id="p1" placeholder="Player One Name">
  <input id="p2" placeholder="Player Two Name">
  <button onclick="startGame()">Start Game</button>
</div>

<!-- GAME -->
<div class="screen hidden" id="game">
  <h3 id="turn"></h3>
  <div class="board" id="board"></div>
  <div class="score">
    <span id="s1"></span>
    <span id="s2"></span>
  </div>
</div>

<script>
let size, players, current=0, scores=[0,0];
let hLines={}, vLines={}, boxes={};

function goMode(){
  menu.classList.add("hidden");
  mode.classList.remove("hidden");
}

function twoPlayerDots(){
  mode.classList.add("hidden");
  dotSetup.classList.remove("hidden");
}

function nameSetup(){
  size=parseInt(document.getElementById("gridSize").value);
  dotSetup.classList.add("hidden");
  nameSetupDiv.classList.remove("hidden");
}
const nameSetupDiv=document.getElementById("nameSetup");

function startGame(){
  players=[
    document.getElementById("p1").value||"Player A",
    document.getElementById("p2").value||"Player B"
  ];
  nameSetupDiv.classList.add("hidden");
  game.classList.remove("hidden");
  buildBoard();
}

function buildBoard(){
  const board=document.getElementById("board");
  board.innerHTML="";
  const gap=300/(size-1);
  board.style.width="300px";
  board.style.height="300px";

  for(let r=0;r<size;r++){
    for(let c=0;c<size;c++){
      const d=document.createElement("div");
      d.className="dot";
      d.style.left=c*gap+"px";
      d.style.top=r*gap+"px";
      board.appendChild(d);
    }
  }

  for(let r=0;r<size;r++){
    for(let c=0;c<size-1;c++){
      createLine("h",r,c,gap);
    }
  }

  for(let r=0;r<size-1;r++){
    for(let c=0;c<size;c++){
      createLine("v",r,c,gap);
    }
  }
  updateUI();
}

function createLine(type,r,c,gap){
  const line=document.createElement("div");
  if(type==="h"){
    line.className="h-line";
    line.style.left=c*gap+"px";
    line.style.top=r*gap+"px";
    line.style.width=gap+"px";
    line.onclick=()=>playLine("h",r,c,line);
  }else{
    line.className="v-line";
    line.style.left=c*gap+"px";
    line.style.top=r*gap+"px";
    line.style.height=gap+"px";
    line.onclick=()=>playLine("v",r,c,line);
  }
  board.appendChild(line);
}

function playLine(type,r,c,el){
  if(el.classList.contains("active")) return;
  el.classList.add("active");

  let scored=false;
  if(type==="h"){
    scored|=checkBox(r-1,c);
    scored|=checkBox(r,c);
  }else{
    scored|=checkBox(r,c-1);
    scored|=checkBox(r,c);
  }

  if(!scored) current=1-current;
  updateUI();
}

function checkBox(r,c){
  if(r<0||c<0||r>=size-1||c>=size-1) return false;
  const key=r+"-"+c;
  if(boxes[key]) return false;

  const box=document.createElement("div");
  box.className="box";
  box.textContent=players[current];
  box.style.left=c*(300/(size-1))+20+"px";
  box.style.top=r*(300/(size-1))+20+"px";
  box.style.width=(300/(size-1))-40+"px";
  box.style.height=(300/(size-1))-40+"px";
  board.appendChild(box);

  boxes[key]=true;
  scores[current]++;
  return true;
}

function updateUI(){
  turn.textContent="Turn: "+players[current];
  s1.textContent=players[0]+": "+scores[0];
  s2.textContent=players[1]+": "+scores[1];
}
</script>

</body>
</html>
